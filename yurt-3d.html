<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–µ“£—ñ—Å—Ç—ñ–∫ –ø–µ–Ω –°”©–∑ | 3D –ö–∏—ñ–∑ “Æ–π</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- GSAP + ScrollTrigger -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;0,700;1,400&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'void': '#0a0a0f',
                        'void-light': '#12121a',
                        'starlight': '#f8f8f2',
                        'goldenrod': '#daa520',
                        'gold-light': '#f4d03f',
                        'cyan': '#00ffff',
                    },
                    fontFamily: {
                        'display': ['Cormorant Garamond', 'serif'],
                        'sans': ['Space Grotesk', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    
    <style>
        :root {
            --void: #0a0a0f;
            --starlight: #f8f8f2;
            --goldenrod: #daa520;
            --cyan: #00ffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background: var(--void);
            color: var(--starlight);
            overflow-x: hidden;
        }

        /* Hero Canvas */
        .hero-section {
            height: 100vh;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .hero-bg {
            position: absolute;
            inset: 0;
            background: radial-gradient(ellipse at center, #1a1a2e 0%, #0a0a0f 70%);
        }

        .hero-content {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 2rem;
        }

        .hero-headline {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(3rem, 10vw, 8rem);
            font-weight: 300;
            letter-spacing: 0.15em;
            background: linear-gradient(135deg, var(--starlight) 0%, var(--goldenrod) 50%, var(--cyan) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-subhead {
            font-size: clamp(0.875rem, 2vw, 1.25rem);
            color: rgba(248, 248, 242, 0.6);
            letter-spacing: 0.3em;
            text-transform: uppercase;
            margin-top: 1rem;
        }

        /* 3D Section */
        .yurt-3d-section {
            min-height: 100vh;
            position: relative;
            background: linear-gradient(180deg, var(--void) 0%, #0f0f1a 50%, var(--void) 100%);
        }

        #yurt-canvas-container {
            position: relative;
            width: 100%;
            height: 100vh;
        }

        #yurt-canvas {
            display: block;
            width: 100%;
            height: 100%;
        }

        /* 3D Controls */
        .controls-panel {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 1rem;
            z-index: 100;
            flex-wrap: wrap;
            justify-content: center;
            padding: 0 1rem;
        }

        .control-btn {
            padding: 0.75rem 1.5rem;
            background: rgba(218, 165, 32, 0.1);
            border: 1px solid rgba(218, 165, 32, 0.3);
            border-radius: 100px;
            color: var(--goldenrod);
            font-family: 'Space Grotesk', sans-serif;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .control-btn:hover {
            background: rgba(218, 165, 32, 0.2);
            border-color: var(--goldenrod);
            transform: scale(1.05);
        }

        .control-btn.active {
            background: var(--goldenrod);
            color: var(--void);
        }

        /* Info Panel */
        .info-panel {
            position: absolute;
            top: 2rem;
            left: 2rem;
            max-width: 350px;
            padding: 2rem;
            background: rgba(10, 10, 15, 0.9);
            border: 1px solid rgba(218, 165, 32, 0.2);
            border-radius: 1rem;
            backdrop-filter: blur(20px);
            z-index: 100;
        }

        .info-panel h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.75rem;
            color: var(--goldenrod);
            margin-bottom: 1rem;
        }

        .info-panel p {
            font-size: 0.9rem;
            line-height: 1.7;
            color: rgba(248, 248, 242, 0.8);
        }

        .component-label {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            background: rgba(0, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 255, 0.3);
            border-radius: 100px;
            font-size: 0.75rem;
            color: var(--cyan);
            margin-top: 1rem;
        }

        /* Section Title */
        .section-header {
            position: absolute;
            top: 2rem;
            right: 2rem;
            text-align: right;
            z-index: 100;
        }

        .section-subtitle {
            font-size: 0.75rem;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            color: var(--goldenrod);
            margin-bottom: 0.5rem;
        }

        .section-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 300;
            text-shadow: 0 0 40px rgba(218, 165, 32, 0.3);
        }

        /* Grammar Section */
        .grammar-section {
            min-height: 100vh;
            padding: 6rem 2rem;
            background: var(--void);
        }

        .grammar-intro {
            max-width: 900px;
            margin: 0 auto 4rem;
            text-align: center;
        }

        .grammar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .grammar-card {
            background: linear-gradient(145deg, rgba(0, 255, 255, 0.03) 0%, rgba(18, 18, 26, 0.8) 100%);
            border: 1px solid rgba(0, 255, 255, 0.15);
            border-radius: 1.5rem;
            padding: 2rem;
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
        }

        .grammar-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--cyan), var(--goldenrod));
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.4s ease;
        }

        .grammar-card:hover::before {
            transform: scaleX(1);
        }

        .grammar-card:hover {
            transform: translateY(-8px);
            border-color: rgba(0, 255, 255, 0.4);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3), 0 0 30px rgba(0, 255, 255, 0.1);
        }

        .card-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
        }

        .card-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
            margin-bottom: 0.75rem;
        }

        .card-example {
            font-family: 'JetBrains Mono', 'Courier New', monospace;
            color: var(--goldenrod);
            background: rgba(218, 165, 32, 0.1);
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            margin-bottom: 0.75rem;
            border-left: 3px solid var(--goldenrod);
        }

        .card-desc {
            font-size: 0.9rem;
            color: rgba(248, 248, 242, 0.7);
            line-height: 1.6;
        }

        /* Matryoshka */
        .matryoshka-section {
            max-width: 800px;
            margin: 4rem auto;
            text-align: center;
        }

        .matryoshka-visual {
            font-family: 'JetBrains Mono', monospace;
            font-size: clamp(1rem, 2.5vw, 1.75rem);
            padding: 2rem;
            background: rgba(0, 255, 255, 0.03);
            border: 1px solid rgba(0, 255, 255, 0.1);
            border-radius: 1rem;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.5rem;
        }

        .quote-outer { color: var(--cyan); font-weight: bold; }
        .quote-inner { color: var(--goldenrod); font-weight: bold; }

        /* Conclusion */
        .conclusion-section {
            min-height: 80vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 4rem 2rem;
            background: linear-gradient(180deg, var(--void) 0%, #0f0f1a 100%);
        }

        .philosophy-text {
            font-family: 'Cormorant Garamond', serif;
            font-size: clamp(1.25rem, 3vw, 2rem);
            font-weight: 300;
            line-height: 1.7;
            max-width: 800px;
            margin-bottom: 3rem;
        }

        .philosophy-text .gold { color: var(--goldenrod); }
        .philosophy-text .cyan { color: var(--cyan); }

        .cta-button {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            padding: 1.25rem 2.5rem;
            background: linear-gradient(135deg, var(--goldenrod), var(--gold-light));
            color: var(--void);
            font-weight: 600;
            font-size: 1rem;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            border: none;
            border-radius: 100px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cta-button:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 40px rgba(218, 165, 32, 0.4);
        }

        /* Footer */
        footer {
            padding: 3rem 2rem;
            text-align: center;
            border-top: 1px solid rgba(248, 248, 242, 0.1);
        }

        .footer-text {
            font-size: 0.875rem;
            color: rgba(248, 248, 242, 0.5);
        }

        .footer-text span {
            color: var(--goldenrod);
        }

        /* Loading */
        .loader {
            position: fixed;
            inset: 0;
            background: var(--void);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            gap: 2rem;
        }

        .loader-ring {
            width: 60px;
            height: 60px;
            border: 2px solid rgba(218, 165, 32, 0.2);
            border-top-color: var(--goldenrod);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loader-text {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.25rem;
            letter-spacing: 0.2em;
            color: var(--starlight);
        }

        /* Scroll indicator */
        .scroll-indicator {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            opacity: 0.6;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(10px); }
        }

        .scroll-line {
            width: 1px;
            height: 50px;
            background: linear-gradient(to bottom, var(--goldenrod), transparent);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .info-panel {
                position: relative;
                top: auto;
                left: auto;
                max-width: 100%;
                margin: 1rem;
                order: 2;
            }

            .section-header {
                position: relative;
                top: auto;
                right: auto;
                text-align: center;
                padding: 2rem 1rem 1rem;
            }

            #yurt-canvas-container {
                height: 60vh;
            }

            .controls-panel {
                position: relative;
                bottom: auto;
                transform: none;
                left: auto;
                padding: 1rem;
            }
        }

        /* Grain overlay */
        .grain {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: 9998;
            opacity: 0.02;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
        }
    </style>
</head>
<body>
    <!-- Loader -->
    <div class="loader" id="loader">
        <div class="loader-ring"></div>
        <div class="loader-text">3D –ñ“Æ–ö–¢–ï–õ–£–î–ï</div>
    </div>

    <!-- Grain -->
    <div class="grain"></div>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-bg"></div>
        <div class="hero-content">
            <p class="hero-subhead">–ö–∏—ñ–∑ “Ø–π –∏–Ω–∂–µ–Ω–µ—Ä–ª—ñ–≥—ñ –∂”ô–Ω–µ –û–π —Ç–∞–∑–∞–ª—ã“ì—ã</p>
            <h1 class="hero-headline">–ö–ï“¢–Ü–°–¢–Ü–ö –ü–ï–ù –°”®–ó</h1>
        </div>
        <div class="scroll-indicator">
            <span style="font-size: 0.7rem; letter-spacing: 0.2em;">3D –ú–û–î–ï–õ–¨</span>
            <div class="scroll-line"></div>
        </div>
    </section>

    <!-- 3D Yurt Section -->
    <section class="yurt-3d-section" id="yurt3d">
        <div class="section-header">
            <p class="section-subtitle">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤—Ç—ñ 3D –º–æ–¥–µ–ª—å</p>
            <h2 class="section-title">–ö–ò–Ü–ó “Æ–ô</h2>
        </div>

        <div class="info-panel" id="infoPanel">
            <h3 id="componentTitle">–ö–∏—ñ–∑ “Ø–π</h3>
            <p id="componentDesc">
                –ú—ã“£–¥–∞“ì–∞–Ω –∂—ã–ª –±–æ–π—ã –¥–∞–º—ã“ì–∞–Ω –∫”©—à–ø–µ–Ω–¥—ñ–ª–µ—Ä —Å”ô—É–ª–µ—Ç—ñ. –¢—ã—à“õ–∞–Ω–º–µ–Ω –∞–π–Ω–∞–ª–¥—ã—Ä—ã“£—ã–∑ –Ω–µ–º–µ—Å–µ —Ç“Ø–π–º–µ–ª–µ—Ä–¥—ñ –±–∞—Å—ã“£—ã–∑.
            </p>
            <span class="component-label" id="componentLabel">–¢–æ–ª—ã“õ “õ“±—Ä—ã–ª—ã–º</span>
        </div>

        <div id="yurt-canvas-container">
            <canvas id="yurt-canvas"></canvas>
        </div>

        <div class="controls-panel">
            <button class="control-btn active" id="btnAssembled" onclick="showAssembled()">–ñ–∏–Ω–∞–ª“ì–∞–Ω</button>
            <button class="control-btn" id="btnExploded" onclick="showExploded()">–ë”©–ª—à–µ–∫—Ç–µ—Ä</button>
            <button class="control-btn" id="btnShanyrak" onclick="focusShanyrak()">–®–∞“£—ã—Ä–∞“õ</button>
            <button class="control-btn" id="btnKerege" onclick="focusKerege()">–ö–µ—Ä–µ–≥–µ</button>
            <button class="control-btn" id="btnDay" onclick="toggleDayNight()">–ö“Ø–Ω/–¢“Ø–Ω</button>
            <button class="control-btn" id="btnAutoRotate" onclick="toggleAutoRotate()">–ê–π–Ω–∞–ª—É</button>
        </div>
    </section>

    <!-- Grammar Section -->
    <section class="grammar-section" id="grammar">
        <div class="grammar-intro">
            <p class="section-subtitle" style="color: var(--cyan);">–õ–æ–≥–∏–∫–∞–Ω—ã“£ –∞–∫—Å–∏–æ–º–∞–ª–∞—Ä—ã</p>
            <h2 class="section-title" style="text-shadow: 0 0 40px rgba(0, 255, 255, 0.3);">–¢–´–†–ù–ê“ö–®–ê –ï–†–ï–ñ–ï–°–Ü</h2>
            <p style="color: rgba(248, 248, 242, 0.7); margin-top: 1rem; max-width: 600px; margin-left: auto; margin-right: auto;">
                –¢—ã—Ä–Ω–∞“õ—à–∞ ‚Äî –∂–∞–π “ì–∞–Ω–∞ –±–µ–ª–≥—ñ –µ–º–µ—Å, –æ–ª –æ–π–¥—ã“£ —Å”ô—É–ª–µ—Ç—ñ. –î“±—Ä—ã—Å “õ–æ–ª–¥–∞–Ω—É ‚Äî —Å–∞—É–∞—Ç—Ç—ã–ª—ã“õ—Ç—ã“£ –∫”©—Ä—ñ–Ω—ñ—Å—ñ.
            </p>
        </div>

        <div class="grammar-grid">
            <div class="grammar-card">
                <div class="card-icon">¬´¬ª</div>
                <h4 class="card-title">–§—Ä–∞–Ω—Ü—É–∑ —Ç—ã—Ä–Ω–∞“õ—à–∞—Å—ã</h4>
                <div class="card-example">¬´...¬ª</div>
                <p class="card-desc">–ù–µ–≥—ñ–∑–≥—ñ —Ç—ã—Ä–Ω–∞“õ—à–∞. “ö–∞–∑–∞“õ —Ç—ñ–ª—ñ–Ω–¥–µ –¥”ô–π–µ–∫—Å”©–∑–¥–µ—Ä, –∞—Ç–∞—É–ª–∞—Ä –∂”ô–Ω–µ —Ç”©–ª —Å”©–∑–¥–µ—Ä –æ—Å—ã –±–µ–ª–≥—ñ–º–µ–Ω –∂–∞–∑—ã–ª–∞–¥—ã.</p>
            </div>

            <div class="grammar-card">
                <div class="card-icon">‚Äû"</div>
                <h4 class="card-title">–ù–µ–º—ñ—Å —Ç—ã—Ä–Ω–∞“õ—à–∞—Å—ã</h4>
                <div class="card-example">‚Äû..."</div>
                <p class="card-desc">–Ü—à–∫—ñ —Ç—ã—Ä–Ω–∞“õ—à–∞. –¢—ã—Ä–Ω–∞“õ—à–∞ —ñ—à—ñ–Ω–¥–µ —Ç–∞“ì—ã –±—ñ—Ä –¥”ô–π–µ–∫—Å”©–∑ –±–æ–ª“ì–∞–Ω–¥–∞ “õ–æ–ª–¥–∞–Ω—ã–ª–∞–¥—ã.</p>
            </div>

            <div class="grammar-card">
                <div class="card-icon">üí¨</div>
                <h4 class="card-title">–¢”©–ª —Å”©–∑</h4>
                <div class="card-example">–ê–±–∞–π: ¬´–ê–¥–∞–º –±–æ–ª¬ª</div>
                <p class="card-desc">–ë—ñ—Ä–µ—É–¥—ñ“£ —Å”©–∑—ñ–Ω —Ç—ñ–∫–µ–ª–µ–π –±–µ—Ä—É. “ö–æ—Å –Ω“Ø–∫—Ç–µ–¥–µ–Ω –∫–µ–π—ñ–Ω, “Ø–ª–∫–µ–Ω ”ô—Ä—ñ–ø–ø–µ–Ω –±–∞—Å—Ç–∞–ª–∞–¥—ã.</p>
            </div>

            <div class="grammar-card">
                <div class="card-icon">üìñ</div>
                <h4 class="card-title">–ê—Ç–∞—É–ª–∞—Ä</h4>
                <div class="card-example">¬´–ï–≥–µ–º–µ–Ω “ö–∞–∑–∞“õ—Å—Ç–∞–Ω¬ª</div>
                <p class="card-desc">–ì–∞–∑–µ—Ç, –∂—É—Ä–Ω–∞–ª, –∫—ñ—Ç–∞–ø, —Ñ–∏–ª—å–º –∞—Ç–∞—É–ª–∞—Ä—ã —Ç—ã—Ä–Ω–∞“õ—à–∞“ì–∞ –∞–ª—ã–Ω–∞–¥—ã.</p>
            </div>

            <div class="grammar-card">
                <div class="card-icon">üòè</div>
                <h4 class="card-title">–ò—Ä–æ–Ω–∏—è</h4>
                <div class="card-example">–û–ª ¬´“Ø–ª–∫–µ–Ω –º–∞–º–∞–Ω¬ª –µ–∫–µ–Ω</div>
                <p class="card-desc">–°”©–∑–¥—ñ –º—ã—Å“õ—ã–ª–¥–∞—É –Ω–µ–º–µ—Å–µ –∫“Ø–º”ô–Ω –º–∞“ì—ã–Ω–∞—Å—ã–Ω–¥–∞ “õ–æ–ª–¥–∞–Ω“ì–∞–Ω–¥–∞ —Ç—ã—Ä–Ω–∞“õ—à–∞“ì–∞ –∞–ª—ã–Ω–∞–¥—ã.</p>
            </div>

            <div class="grammar-card">
                <div class="card-icon">‚úì</div>
                <h4 class="card-title">–ù“Ø–∫—Ç–µ –µ—Ä–µ–∂–µ—Å—ñ</h4>
                <div class="card-example">–û–ª ¬´–∫–µ–ª–µ–º—ñ–Ω¬ª –¥–µ–¥—ñ.</div>
                <p class="card-desc">–ù“Ø–∫—Ç–µ ”ô—Ä“õ–∞—à–∞–Ω —Ç—ã—Ä–Ω–∞“õ—à–∞–¥–∞–Ω –∫–µ–π—ñ–Ω “õ–æ–π—ã–ª–∞–¥—ã, —ñ—à—ñ–Ω–¥–µ –µ–º–µ—Å.</p>
            </div>
        </div>

        <div class="matryoshka-section">
            <p class="section-subtitle" style="color: var(--goldenrod); margin-bottom: 1.5rem;">¬´–ú–∞—Ç—Ä—ë—à–∫–∞¬ª –µ—Ä–µ–∂–µ—Å—ñ</p>
            <div class="matryoshka-visual">
                <span class="quote-outer">¬´</span>
                <span>–û–ª –º–∞“ì–∞–Ω</span>
                <span class="quote-inner">‚Äû</span>
                <span>–ë“±–ª –¥“±—Ä—ã—Å</span>
                <span class="quote-inner">"</span>
                <span>–¥–µ–ø –∞–π—Ç—Ç—ã</span>
                <span class="quote-outer">¬ª</span>
            </div>
            <p style="margin-top: 1rem; color: rgba(248, 248, 242, 0.5); font-size: 0.875rem;">
                –Ü—à–∫—ñ –¥”ô–π–µ–∫—Å”©–∑ ‚Äî –Ω–µ–º—ñ—Å —Ç—ã—Ä–Ω–∞“õ—à–∞—Å—ã–Ω–¥–∞, —Å—ã—Ä—Ç“õ—ã ‚Äî —Ñ—Ä–∞–Ω—Ü—É–∑ —Ç—ã—Ä–Ω–∞“õ—à–∞—Å—ã–Ω–¥–∞.
            </p>
        </div>
    </section>

    <!-- Conclusion -->
    <section class="conclusion-section">
        <p class="philosophy-text">
            <span class="gold">–ö–∏—ñ–∑ “Ø–π</span> ‚Äî –±–æ–ª–∞—à–∞“õ—Ç—ã“£ —ç–∫–æ–ª–æ–≥–∏—è–ª—ã“õ “Ø–π—ñ.<br>
            <span class="cyan">–¢—ã—Ä–Ω–∞“õ—à–∞</span> ‚Äî —Å–∞—É–∞—Ç—Ç—ã–ª—ã“õ—Ç—ã“£ –±–µ–ª–≥—ñ—Å—ñ.<br><br>
            –ï–∫–µ—É—ñ –¥–µ ‚Äî “õ–∞–∑–∞“õ –º”ô–¥–µ–Ω–∏–µ—Ç—ñ–Ω—ñ“£ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞—Å—ã.
        </p>
        <button class="cta-button" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
            <span>–ë–æ–ª–∞—à–∞“õ—Ç—ã “õ“±—Ä</span>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
        </button>
    </section>

    <!-- Footer -->
    <footer>
        <p class="footer-text">–î–∞–π—ã–Ω–¥–∞“ì–∞–Ω: <span>AiPay</span> | 2024 | <span>“ö–∞–∑–∞“õ—Å—Ç–∞–Ω</span></p>
    </footer>

    <script>
        // ============================================
        // THREE.JS 3D YURT SIMULATION
        // ============================================

        let scene, camera, renderer, controls;
        let yurtGroup, shanyrakGroup, keregeGroup, uykGroup, feltGroup, doorGroup;
        let isExploded = false;
        let isDayMode = true;
        let isAutoRotate = false;
        let targetRotationY = 0;
        let currentFocus = 'all';

        // Component info
        const componentInfo = {
            all: {
                title: '–ö–∏—ñ–∑ “Ø–π',
                desc: '–ú—ã“£–¥–∞“ì–∞–Ω –∂—ã–ª –±–æ–π—ã –¥–∞–º—ã“ì–∞–Ω –∫”©—à–ø–µ–Ω–¥—ñ–ª–µ—Ä —Å”ô—É–ª–µ—Ç—ñ. –ë—ñ—Ä–¥–µ-–±—ñ—Ä —à–µ–≥–µ “õ–æ–ª–¥–∞–Ω—ã–ª–º–∞–π–¥—ã ‚Äî —Ç–µ–∫ —Ç–∞–±–∏“ì–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–¥–∞—Ä –º–µ–Ω —Ñ–∏–∑–∏–∫–∞ –∑–∞“£–¥–∞—Ä—ã.',
                label: '–¢–æ–ª—ã“õ “õ“±—Ä—ã–ª—ã–º'
            },
            shanyrak: {
                title: '–®–∞“£—ã—Ä–∞“õ',
                desc: '–ö–∏—ñ–∑ “Ø–π–¥—ñ“£ —Ç”ô–∂—ñ ‚Äî –æ—Ç–±–∞—Å—ã –º–µ–Ω –ö“Ø–Ω–Ω—ñ“£ —Å–∏–º–≤–æ–ª—ã. –ê—Å–ø–∞–Ω“ì–∞ –∞—à—ã–ª“ì–∞–Ω —Ç–µ—Ä–µ–∑–µ, –∂–∞—Ä—ã“õ –ø–µ–Ω —Ä—É—Ö –µ–Ω–µ—Ç—ñ–Ω –µ—Å—ñ–∫. ”ò–∫–µ–¥–µ–Ω –±–∞–ª–∞“ì–∞ –º“±—Ä–∞ –±–æ–ª—ã–ø –±–µ—Ä—ñ–ª–µ–¥—ñ.',
                label: '–ñ–æ“ì–∞—Ä“ì—ã –±”©–ª—ñ–∫'
            },
            kerege: {
                title: '–ö–µ—Ä–µ–≥–µ',
                desc: '–¢–æ—Ä–ª—ã “õ–∞–±—ã—Ä“ì–∞ “õ“±—Ä—ã–ª—ã–º—ã ‚Äî –∞–¥–∞–º–∑–∞—Ç –±—ñ—Ä–ª—ñ–≥—ñ–Ω—ñ“£ –±–µ–π–Ω–µ—Å—ñ. –¢–∞–ª –∞“ì–∞—à—Ç–∞—Ä—ã–Ω–∞–Ω –∂–∞—Å–∞–ª–∞–¥—ã, –∂—ã–ª–¥–∞–º –∂–∏–Ω–∞–ª–∞–¥—ã –∂”ô–Ω–µ –±”©–ª—à–µ–∫—Ç–µ–Ω–µ–¥—ñ.',
                label: '“ö–∞–±—ã—Ä“ì–∞'
            },
            uyk: {
                title: '–£—ã“õ',
                desc: '–®–∞—Ç—ã—Ä –±–∞“ì–∞–Ω–∞–ª–∞—Ä—ã ‚Äî —à–∞“£—ã—Ä–∞“õ—Ç—ã –∫–µ—Ä–µ–≥–µ–≥–µ –∂–∞–ª“ì–∞–π–¥—ã. ”ò—Ä–±—ñ—Ä —É—ã“õ –¥”ô–ª –±“±—Ä—ã—à–ø–µ–Ω –æ—Ä–Ω–∞–ª–∞—Å—ã–ø, –∫“Ø—à—Ç—ñ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è “õ“±—Ä–∞–¥—ã.',
                label: '–®–∞—Ç—ã—Ä –±–∞“ì–∞–Ω–∞–ª–∞—Ä—ã'
            },
            felt: {
                title: '–ö–∏—ñ–∑',
                desc: '“ö–æ–π –∂“Ø–Ω—ñ–Ω–µ–Ω –∂–∞—Å–∞–ª“ì–∞–Ω —Ç–∞–±–∏“ì–∏ –∂—ã–ª—É –æ“õ—à–∞—É–ª–∞“ì—ã—à. –ñ–∞–∑–¥–∞ —Å–∞–ª“õ—ã–Ω, “õ—ã—Å—Ç–∞ –∂—ã–ª—ã —Å–∞“õ—Ç–∞–π–¥—ã. –≠–∫–æ–ª–æ–≥–∏—è–ª—ã“õ —Ç–∞–∑–∞ –º–∞—Ç–µ—Ä–∏–∞–ª.',
                label: '–ñ–∞–±—ã–Ω'
            }
        };

        function init() {
            const container = document.getElementById('yurt-canvas-container');
            const canvas = document.getElementById('yurt-canvas');

            // Scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x0a0a0f);
            scene.fog = new THREE.Fog(0x0a0a0f, 15, 35);

            // Camera
            camera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 0.1, 1000);
            camera.position.set(8, 6, 12);
            camera.lookAt(0, 2, 0);

            // Renderer
            renderer = new THREE.WebGLRenderer({ 
                canvas: canvas, 
                antialias: true,
                alpha: true
            });
            renderer.setSize(container.clientWidth, container.clientHeight);
            renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            renderer.toneMapping = THREE.ACESFilmicToneMapping;
            renderer.toneMappingExposure = 1.2;

            // Lights
            setupLights();

            // Create Yurt
            createYurt();

            // Ground
            createGround();

            // Stars
            createStars();

            // Mouse controls
            setupMouseControls(container);

            // Animation loop
            animate();

            // Handle resize
            window.addEventListener('resize', onWindowResize);

            // Hide loader
            setTimeout(() => {
                document.getElementById('loader').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('loader').style.display = 'none';
                }, 500);
            }, 1500);
        }

        function setupLights() {
            // Ambient light
            const ambient = new THREE.AmbientLight(0x404060, 0.5);
            scene.add(ambient);

            // Main directional light (sun/moon)
            const mainLight = new THREE.DirectionalLight(0xfff5e6, 1.5);
            mainLight.position.set(10, 15, 10);
            mainLight.castShadow = true;
            mainLight.shadow.mapSize.width = 2048;
            mainLight.shadow.mapSize.height = 2048;
            mainLight.shadow.camera.near = 0.5;
            mainLight.shadow.camera.far = 50;
            mainLight.shadow.camera.left = -15;
            mainLight.shadow.camera.right = 15;
            mainLight.shadow.camera.top = 15;
            mainLight.shadow.camera.bottom = -15;
            mainLight.name = 'mainLight';
            scene.add(mainLight);

            // Fill light
            const fillLight = new THREE.DirectionalLight(0x8888ff, 0.3);
            fillLight.position.set(-5, 5, -5);
            scene.add(fillLight);

            // Golden accent light
            const accentLight = new THREE.PointLight(0xdaa520, 0.8, 20);
            accentLight.position.set(0, 5, 0);
            accentLight.name = 'accentLight';
            scene.add(accentLight);

            // Ground reflection light
            const groundLight = new THREE.PointLight(0x00ffff, 0.2, 15);
            groundLight.position.set(0, 0.5, 0);
            scene.add(groundLight);
        }

        function createYurt() {
            yurtGroup = new THREE.Group();

            // Materials
            const woodMaterial = new THREE.MeshStandardMaterial({
                color: 0x8B4513,
                roughness: 0.8,
                metalness: 0.1,
            });

            const goldMaterial = new THREE.MeshStandardMaterial({
                color: 0xdaa520,
                roughness: 0.3,
                metalness: 0.6,
                emissive: 0xdaa520,
                emissiveIntensity: 0.1
            });

            const feltMaterial = new THREE.MeshStandardMaterial({
                color: 0xf5f5dc,
                roughness: 0.9,
                metalness: 0,
                side: THREE.DoubleSide,
                transparent: true,
                opacity: 0.85
            });

            const redFeltMaterial = new THREE.MeshStandardMaterial({
                color: 0x8B0000,
                roughness: 0.9,
                metalness: 0,
            });

            // ============ SHANYRAK (Crown) ============
            shanyrakGroup = new THREE.Group();
            shanyrakGroup.name = 'shanyrak';

            // Main ring
            const shanyrakRing = new THREE.Mesh(
                new THREE.TorusGeometry(1.2, 0.08, 16, 32),
                goldMaterial
            );
            shanyrakRing.rotation.x = Math.PI / 2;
            shanyrakRing.position.y = 5;
            shanyrakRing.castShadow = true;
            shanyrakGroup.add(shanyrakRing);

            // Inner ring
            const innerRing = new THREE.Mesh(
                new THREE.TorusGeometry(0.8, 0.05, 16, 32),
                goldMaterial
            );
            innerRing.rotation.x = Math.PI / 2;
            innerRing.position.y = 5;
            shanyrakGroup.add(innerRing);

            // Cross beams
            for (let i = 0; i < 8; i++) {
                const angle = (i / 8) * Math.PI * 2;
                const beam = new THREE.Mesh(
                    new THREE.CylinderGeometry(0.03, 0.03, 2.4, 8),
                    woodMaterial
                );
                beam.rotation.z = Math.PI / 2;
                beam.rotation.y = angle;
                beam.position.y = 5;
                beam.castShadow = true;
                shanyrakGroup.add(beam);
            }

            // Center decoration
            const centerDeco = new THREE.Mesh(
                new THREE.SphereGeometry(0.15, 16, 16),
                goldMaterial
            );
            centerDeco.position.y = 5.1;
            shanyrakGroup.add(centerDeco);

            yurtGroup.add(shanyrakGroup);

            // ============ UYK (Roof poles) ============
            uykGroup = new THREE.Group();
            uykGroup.name = 'uyk';

            const uykCount = 60;
            for (let i = 0; i < uykCount; i++) {
                const angle = (i / uykCount) * Math.PI * 2;
                const uyk = new THREE.Mesh(
                    new THREE.CylinderGeometry(0.025, 0.035, 4.5, 6),
                    woodMaterial
                );
                
                // Position at kerege top
                const bottomX = Math.cos(angle) * 3.5;
                const bottomZ = Math.sin(angle) * 3.5;
                const topX = Math.cos(angle) * 1.1;
                const topZ = Math.sin(angle) * 1.1;
                
                uyk.position.set(
                    (bottomX + topX) / 2,
                    3.5,
                    (bottomZ + topZ) / 2
                );
                
                // Calculate rotation
                const dx = topX - bottomX;
                const dy = 3;
                const dz = topZ - bottomZ;
                const length = Math.sqrt(dx*dx + dy*dy + dz*dz);
                
                uyk.rotation.z = Math.atan2(Math.sqrt(dx*dx + dz*dz), dy);
                uyk.rotation.y = -angle;
                
                uyk.castShadow = true;
                uykGroup.add(uyk);
            }

            yurtGroup.add(uykGroup);

            // ============ KEREGE (Lattice walls) ============
            keregeGroup = new THREE.Group();
            keregeGroup.name = 'kerege';

            // Create lattice pattern
            const keregeSegments = 12;
            const keregeHeight = 2;
            const keregeRadius = 3.5;

            for (let s = 0; s < keregeSegments; s++) {
                const segmentGroup = new THREE.Group();
                const angleStart = (s / keregeSegments) * Math.PI * 2;
                const angleEnd = ((s + 1) / keregeSegments) * Math.PI * 2;
                
                // Vertical poles
                for (let v = 0; v <= 4; v++) {
                    const angle = angleStart + (v / 4) * (angleEnd - angleStart);
                    const pole = new THREE.Mesh(
                        new THREE.CylinderGeometry(0.025, 0.025, keregeHeight, 6),
                        woodMaterial
                    );
                    pole.position.set(
                        Math.cos(angle) * keregeRadius,
                        keregeHeight / 2 + 0.5,
                        Math.sin(angle) * keregeRadius
                    );
                    pole.castShadow = true;
                    segmentGroup.add(pole);
                }

                // Diagonal lattice
                for (let d = 0; d < 8; d++) {
                    const t = d / 8;
                    const angle1 = angleStart + t * (angleEnd - angleStart);
                    const angle2 = angleStart + (t + 0.25) * (angleEnd - angleStart);
                    
                    // Create diagonal
                    const x1 = Math.cos(angle1) * keregeRadius;
                    const z1 = Math.sin(angle1) * keregeRadius;
                    const x2 = Math.cos(angle2) * keregeRadius;
                    const z2 = Math.sin(angle2) * keregeRadius;
                    
                    const diagLength = Math.sqrt((x2-x1)**2 + keregeHeight**2 + (z2-z1)**2) * 0.5;
                    
                    const diag = new THREE.Mesh(
                        new THREE.CylinderGeometry(0.015, 0.015, diagLength, 4),
                        woodMaterial
                    );
                    
                    diag.position.set((x1+x2)/2, keregeHeight/2 + 0.5, (z1+z2)/2);
                    diag.rotation.z = Math.PI / 4;
                    diag.rotation.y = -angle1;
                    segmentGroup.add(diag);
                }

                keregeGroup.add(segmentGroup);
            }

            // Top ring of kerege
            const topRing = new THREE.Mesh(
                new THREE.TorusGeometry(keregeRadius, 0.04, 8, 64),
                woodMaterial
            );
            topRing.rotation.x = Math.PI / 2;
            topRing.position.y = keregeHeight + 0.5;
            keregeGroup.add(topRing);

            // Bottom ring
            const bottomRing = new THREE.Mesh(
                new THREE.TorusGeometry(keregeRadius, 0.04, 8, 64),
                woodMaterial
            );
            bottomRing.rotation.x = Math.PI / 2;
            bottomRing.position.y = 0.5;
            keregeGroup.add(bottomRing);

            yurtGroup.add(keregeGroup);

            // ============ FELT COVERING ============
            feltGroup = new THREE.Group();
            feltGroup.name = 'felt';

            // Roof felt (cone)
            const roofGeometry = new THREE.ConeGeometry(3.7, 3, 64, 1, true);
            const roofFelt = new THREE.Mesh(roofGeometry, feltMaterial);
            roofFelt.position.y = 4;
            roofFelt.castShadow = true;
            roofFelt.receiveShadow = true;
            feltGroup.add(roofFelt);

            // Wall felt (cylinder)
            const wallGeometry = new THREE.CylinderGeometry(3.6, 3.6, 2.1, 64, 1, true);
            const wallFelt = new THREE.Mesh(wallGeometry, feltMaterial);
            wallFelt.position.y = 1.5;
            wallFelt.castShadow = true;
            wallFelt.receiveShadow = true;
            feltGroup.add(wallFelt);

            // Decorative band
            const bandGeometry = new THREE.CylinderGeometry(3.65, 3.65, 0.3, 64, 1, true);
            const band = new THREE.Mesh(bandGeometry, redFeltMaterial);
            band.position.y = 2.5;
            feltGroup.add(band);

            yurtGroup.add(feltGroup);

            // ============ DOOR ============
            doorGroup = new THREE.Group();
            doorGroup.name = 'door';

            // Door frame
            const doorFrameLeft = new THREE.Mesh(
                new THREE.BoxGeometry(0.1, 1.8, 0.1),
                woodMaterial
            );
            doorFrameLeft.position.set(3.5, 1.4, -0.4);
            doorGroup.add(doorFrameLeft);

            const doorFrameRight = new THREE.Mesh(
                new THREE.BoxGeometry(0.1, 1.8, 0.1),
                woodMaterial
            );
            doorFrameRight.position.set(3.5, 1.4, 0.4);
            doorGroup.add(doorFrameRight);

            const doorFrameTop = new THREE.Mesh(
                new THREE.BoxGeometry(0.1, 0.1, 0.9),
                woodMaterial
            );
            doorFrameTop.position.set(3.5, 2.3, 0);
            doorGroup.add(doorFrameTop);

            // Door panel (red)
            const doorPanel = new THREE.Mesh(
                new THREE.BoxGeometry(0.05, 1.7, 0.75),
                redFeltMaterial
            );
            doorPanel.position.set(3.55, 1.35, 0);
            doorGroup.add(doorPanel);

            yurtGroup.add(doorGroup);

            // Add yurt to scene
            scene.add(yurtGroup);
        }

        function createGround() {
            // Ground plane
            const groundGeometry = new THREE.CircleGeometry(20, 64);
            const groundMaterial = new THREE.MeshStandardMaterial({
                color: 0x1a1a2e,
                roughness: 1,
                metalness: 0
            });
            const ground = new THREE.Mesh(groundGeometry, groundMaterial);
            ground.rotation.x = -Math.PI / 2;
            ground.receiveShadow = true;
            scene.add(ground);

            // Decorative ring around yurt
            const ringGeometry = new THREE.RingGeometry(4, 4.2, 64);
            const ringMaterial = new THREE.MeshBasicMaterial({
                color: 0xdaa520,
                transparent: true,
                opacity: 0.3,
                side: THREE.DoubleSide
            });
            const ring = new THREE.Mesh(ringGeometry, ringMaterial);
            ring.rotation.x = -Math.PI / 2;
            ring.position.y = 0.01;
            scene.add(ring);
        }

        function createStars() {
            const starsGeometry = new THREE.BufferGeometry();
            const starPositions = [];
            
            for (let i = 0; i < 500; i++) {
                const theta = Math.random() * Math.PI * 2;
                const phi = Math.random() * Math.PI * 0.5;
                const r = 30 + Math.random() * 20;
                
                starPositions.push(
                    r * Math.sin(phi) * Math.cos(theta),
                    r * Math.cos(phi) + 5,
                    r * Math.sin(phi) * Math.sin(theta)
                );
            }
            
            starsGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starPositions, 3));
            
            const starsMaterial = new THREE.PointsMaterial({
                color: 0xffffff,
                size: 0.1,
                transparent: true,
                opacity: 0.8
            });
            
            const stars = new THREE.Points(starsGeometry, starsMaterial);
            stars.name = 'stars';
            scene.add(stars);
        }

        function setupMouseControls(container) {
            let isDragging = false;
            let previousMouseX = 0;
            let previousMouseY = 0;
            let rotationVelocityX = 0;
            let rotationVelocityY = 0;

            container.addEventListener('mousedown', (e) => {
                isDragging = true;
                previousMouseX = e.clientX;
                previousMouseY = e.clientY;
            });

            container.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                
                const deltaX = e.clientX - previousMouseX;
                const deltaY = e.clientY - previousMouseY;
                
                rotationVelocityX = deltaX * 0.005;
                rotationVelocityY = deltaY * 0.005;
                
                yurtGroup.rotation.y += rotationVelocityX;
                camera.position.y = Math.max(2, Math.min(12, camera.position.y - rotationVelocityY * 2));
                camera.lookAt(0, 2, 0);
                
                previousMouseX = e.clientX;
                previousMouseY = e.clientY;
            });

            container.addEventListener('mouseup', () => isDragging = false);
            container.addEventListener('mouseleave', () => isDragging = false);

            // Touch support
            container.addEventListener('touchstart', (e) => {
                isDragging = true;
                previousMouseX = e.touches[0].clientX;
                previousMouseY = e.touches[0].clientY;
            });

            container.addEventListener('touchmove', (e) => {
                if (!isDragging) return;
                e.preventDefault();
                
                const deltaX = e.touches[0].clientX - previousMouseX;
                yurtGroup.rotation.y += deltaX * 0.005;
                
                previousMouseX = e.touches[0].clientX;
                previousMouseY = e.touches[0].clientY;
            });

            container.addEventListener('touchend', () => isDragging = false);

            // Zoom with scroll
            container.addEventListener('wheel', (e) => {
                e.preventDefault();
                const zoomSpeed = 0.001;
                const distance = camera.position.length();
                const newDistance = distance + e.deltaY * zoomSpeed * distance;
                
                if (newDistance > 8 && newDistance < 25) {
                    camera.position.normalize().multiplyScalar(newDistance);
                    camera.lookAt(0, 2, 0);
                }
            }, { passive: false });
        }

        function animate() {
            requestAnimationFrame(animate);

            // Auto rotation
            if (isAutoRotate) {
                yurtGroup.rotation.y += 0.003;
            }

            // Gentle float animation for shanyrak
            if (shanyrakGroup) {
                shanyrakGroup.position.y = Math.sin(Date.now() * 0.001) * 0.02;
            }

            renderer.render(scene, camera);
        }

        function onWindowResize() {
            const container = document.getElementById('yurt-canvas-container');
            camera.aspect = container.clientWidth / container.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(container.clientWidth, container.clientHeight);
        }

        // ============ CONTROL FUNCTIONS ============

        function updateInfo(key) {
            const info = componentInfo[key];
            document.getElementById('componentTitle').textContent = info.title;
            document.getElementById('componentDesc').textContent = info.desc;
            document.getElementById('componentLabel').textContent = info.label;
        }

        function setActiveButton(btnId) {
            document.querySelectorAll('.control-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(btnId).classList.add('active');
        }

        function showAssembled() {
            isExploded = false;
            setActiveButton('btnAssembled');
            updateInfo('all');
            currentFocus = 'all';

            // Animate back to assembled position
            gsap.to(shanyrakGroup.position, { y: 0, duration: 1, ease: 'power2.inOut' });
            gsap.to(uykGroup.position, { y: 0, duration: 1, ease: 'power2.inOut' });
            gsap.to(keregeGroup.position, { y: 0, duration: 1, ease: 'power2.inOut' });
            gsap.to(feltGroup.position, { y: 0, duration: 1, ease: 'power2.inOut' });
            gsap.to(doorGroup.position, { x: 0, duration: 1, ease: 'power2.inOut' });

            // Reset opacity
            feltGroup.children.forEach(child => {
                if (child.material) {
                    gsap.to(child.material, { opacity: 0.85, duration: 0.5 });
                }
            });

            // Reset camera
            gsap.to(camera.position, { x: 8, y: 6, z: 12, duration: 1.5, ease: 'power2.inOut',
                onUpdate: () => camera.lookAt(0, 2, 0)
            });
        }

        function showExploded() {
            isExploded = true;
            setActiveButton('btnExploded');
            updateInfo('all');
            currentFocus = 'all';

            // Explode components
            gsap.to(shanyrakGroup.position, { y: 4, duration: 1.2, ease: 'power2.inOut' });
            gsap.to(uykGroup.position, { y: 2, duration: 1.2, ease: 'power2.inOut', delay: 0.1 });
            gsap.to(feltGroup.position, { y: -1, duration: 1.2, ease: 'power2.inOut', delay: 0.2 });
            gsap.to(doorGroup.position, { x: 2, duration: 1.2, ease: 'power2.inOut', delay: 0.3 });

            // Make felt more transparent
            feltGroup.children.forEach(child => {
                if (child.material) {
                    gsap.to(child.material, { opacity: 0.4, duration: 0.5 });
                }
            });

            // Zoom out camera
            gsap.to(camera.position, { x: 12, y: 10, z: 16, duration: 1.5, ease: 'power2.inOut',
                onUpdate: () => camera.lookAt(0, 3, 0)
            });
        }

        function focusShanyrak() {
            currentFocus = 'shanyrak';
            updateInfo('shanyrak');

            // Camera to shanyrak
            gsap.to(camera.position, { x: 3, y: 7, z: 5, duration: 1.5, ease: 'power2.inOut',
                onUpdate: () => camera.lookAt(0, 5, 0)
            });

            // Highlight shanyrak
            highlightComponent(shanyrakGroup);
        }

        function focusKerege() {
            currentFocus = 'kerege';
            updateInfo('kerege');

            // Camera to kerege level
            gsap.to(camera.position, { x: 6, y: 2, z: 8, duration: 1.5, ease: 'power2.inOut',
                onUpdate: () => camera.lookAt(0, 1.5, 0)
            });

            // Make felt very transparent
            feltGroup.children.forEach(child => {
                if (child.material) {
                    gsap.to(child.material, { opacity: 0.2, duration: 0.5 });
                }
            });
        }

        function highlightComponent(component) {
            // Flash effect
            const originalEmissive = component.children[0]?.material?.emissiveIntensity || 0;
            component.children.forEach(child => {
                if (child.material && child.material.emissive) {
                    gsap.to(child.material, { 
                        emissiveIntensity: 0.5, 
                        duration: 0.3,
                        yoyo: true,
                        repeat: 1
                    });
                }
            });
        }

        function toggleDayNight() {
            isDayMode = !isDayMode;
            const mainLight = scene.getObjectByName('mainLight');
            const accentLight = scene.getObjectByName('accentLight');
            const stars = scene.getObjectByName('stars');

            if (isDayMode) {
                // Day mode
                gsap.to(scene.background, { r: 0.04, g: 0.04, b: 0.06, duration: 1 });
                gsap.to(mainLight, { intensity: 1.5, duration: 1 });
                gsap.to(mainLight.color, { r: 1, g: 0.96, b: 0.9, duration: 1 });
                gsap.to(accentLight, { intensity: 0.8, duration: 1 });
                if (stars) gsap.to(stars.material, { opacity: 0.8, duration: 1 });
            } else {
                // Night mode
                gsap.to(scene.background, { r: 0.02, g: 0.02, b: 0.05, duration: 1 });
                gsap.to(mainLight, { intensity: 0.3, duration: 1 });
                gsap.to(mainLight.color, { r: 0.5, g: 0.5, b: 0.8, duration: 1 });
                gsap.to(accentLight, { intensity: 1.5, duration: 1 });
                if (stars) gsap.to(stars.material, { opacity: 1, duration: 1 });
            }
        }

        function toggleAutoRotate() {
            isAutoRotate = !isAutoRotate;
            document.getElementById('btnAutoRotate').classList.toggle('active', isAutoRotate);
        }

        // Initialize on load
        window.addEventListener('load', init);

        // GSAP scroll animations for grammar section
        gsap.registerPlugin(ScrollTrigger);

        document.addEventListener('DOMContentLoaded', () => {
            // Grammar cards animation
            gsap.utils.toArray('.grammar-card').forEach((card, i) => {
                gsap.from(card, {
                    y: 60,
                    opacity: 0,
                    duration: 0.8,
                    delay: i * 0.1,
                    ease: 'power3.out',
                    scrollTrigger: {
                        trigger: card,
                        start: 'top 85%',
                        toggleActions: 'play none none reverse'
                    }
                });
            });

            // Section titles
            gsap.utils.toArray('.section-title').forEach(title => {
                gsap.from(title, {
                    y: 40,
                    opacity: 0,
                    duration: 1,
                    ease: 'power3.out',
                    scrollTrigger: {
                        trigger: title,
                        start: 'top 80%',
                        toggleActions: 'play none none reverse'
                    }
                });
            });
        });
    </script>
</body>
</html>
